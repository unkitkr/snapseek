<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <link rel="stylesheet" href="../static/fonts.css" />
    <title>Document</title>
  </head>

  <body>
    <div class="background" id="background">
      <div class="tweet-background" id="tweet-background">
        <div class="tweet-data">
          <div class="profile-pic-container">
            <img
              src="https://pbs.twimg.com/profile_images/1458851455901650944/g5OkKqgP_400x400.jpg"
              alt=""
              class="profile-pic"
            />
          </div>
          <div class="profile-text-container">
            <div class="profile-text" id="profile-text">
              <div class="name" id="name"><b>Ankit</b></div>
              <div class="username" id="username">@unkitkr</div>
            </div>
          </div>
        </div>
        <div class="tweet" id="tweet">
          <div class="tweet-text" id="tweet-text">Lorem ipsum</div>
        </div>
      </div>
    </div>
  </body>

  <script lang="ts">
    const downHash = (param) => {
      param = String(param)
      const replace = '*'
      const replaceWith = '#'
      return String(param.replaceAll(replace, replaceWith))
    }

    const url = window.location.search
    const params = new URLSearchParams(url)
    const backgroundImage = params.get('backgroundImage')
    const backgroundColor = params.get('backgroundColor')
    const foregroundColor = params.get('foregroundColor')
    const tweetFont = params.get('tweetFont')
    const profileFont = params.get('profileFont')
    const innerRadius = params.get('innerRadius')
    const outterRadius = params.get('outterRadius')
    const backgroundWidth = params.get('backgroundWidth')
    const backgroundHeight = params.get('bakgroundHeight')
    const tweetText = params.get('tweetText')
    const tweetOwner = params.get('tweetOwner')
    const tweetOwnerUsername = params.get('tweetOwnerUsername')

    // background styles

    document.getElementById('background').style.backgroundImage =
      downHash(backgroundImage)
    document.getElementById('background').style.backgroundColor =
      downHash(backgroundColor)
    document.getElementById('background').style.width =
      downHash(backgroundWidth)
    document.getElementById('background').style.height =
      downHash(backgroundHeight)
    document.getElementById('background').style.borderRadius =
      downHash(outterRadius)

    // tweet and tweet-background styles

    document.getElementById('tweet-background').style.backgroundColor =
      downHash(foregroundColor)
    document.getElementById('tweet-background').style.borderRadius =
      downHash(innerRadius)
    document.getElementById('tweet').style.fontFamily = tweetFont
    document.getElementById('profile-text').fontFamily = profileFont

    // tweet details

    document.getElementById('tweet-text').innerHTML = tweetText
    document.getElementById('username').innerHTML = tweetOwnerUsername
    document.getElementById('name').innerHTML = tweetOwner

    // 'linear-gradient(19deg, *FAACA8 0%, *DDD6F3 100%)'
    // background-image: linear-gradient( 174.2deg,  rgba(255,244,228,1) 7.1%, rgba(240,246,238,1) 67.4% );
  </script>
</html>
